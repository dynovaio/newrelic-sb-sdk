{
  "name": "AVI Infraestructure Performance Overview",
  "description": "",
  "permissions": "PUBLIC_READ_WRITE",
  "pages": [
    {
      "name": "Kubernetes overview",
      "description": null,
      "widgets": [
        {
          "title": "# of K8s Objects",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 4,
            "height": 4
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "dataFormatters": [],
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "SELECT uniqueCount(K8sNodeSample.entityId) as 'Nodes', uniqueCount(K8sNamespaceSample.clusterName) as 'Clusters', uniqueCount(K8sNamespaceSample.entityId) as 'Namespaces', uniqueCount(K8sDeploymentSample.entityId) as 'Deployments', uniqueCount(K8sPodSample.entityId) as 'Pods', uniqueCount(K8sContainerSample.containerID) as 'Containers' FROM K8sNodeSample, K8sNamespaceSample, K8sDeploymentSample, K8sPodSample, K8sContainerSample SINCE 1 minute ago WHERE clusterName IN ('akseu2c001aviprd001') and (namespaceName IN ('eu2-avi-prd-01') OR namespaceName IS NULL)"
              }
            ],
            "thresholds": []
          }
        },
        {
          "title": "Uso de recursos de la aplicaci√≥n",
          "layout": {
            "column": 5,
            "row": 1,
            "width": 4,
            "height": 4
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "dataFormatters": [],
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "SELECT average(cpuUsedCores) * uniqueCount(entityName) AS 'Cores', average(memoryWorkingSetBytes) * uniqueCount(entityName) / 1000000000 AS 'Mem GB' FROM K8sContainerSample WHERE clusterName IN ('akseu2c001aviprd001') AND namespaceName IN ('eu2-avi-prd-01') SINCE 10 minutes ago COMPARE WITH 10 minutes ago"
              }
            ],
            "thresholds": []
          }
        },
        {
          "title": "Uso de recursos del cluster",
          "layout": {
            "column": 9,
            "row": 1,
            "width": 4,
            "height": 2
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "dataFormatters": [],
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "SELECT (average(cpuUsedCores) * uniqueCount(entityName)) as 'Cores',  (average(memoryUsedBytes) * uniqueCount(entityName)) / 1000000000 as 'Mem GB' FROM K8sNodeSample UNTIL 1 minute ago WHERE clusterName IN ('akseu2c001aviprd001') "
              }
            ],
            "thresholds": []
          }
        },
        {
          "title": "Capacidad del cluster",
          "layout": {
            "column": 9,
            "row": 3,
            "width": 4,
            "height": 2
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "dataFormatters": [],
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "FROM K8sNodeSample SELECT average(capacityCpuCores) * uniqueCount(entityName) AS 'Cores', average(capacityMemoryBytes) * uniqueCount(entityName) / 1000000000 AS 'Mem GB' WHERE clusterName IN ('akseu2c001aviprd001')"
              }
            ],
            "thresholds": []
          }
        },
        {
          "title": "Container CPU Usage - % Used vs Limit",
          "layout": {
            "column": 1,
            "row": 5,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "FROM K8sContainerSample SELECT latest(cpuUsedCores/cpuLimitCores) * 100 as '% CPU' FACET clusterName, containerName, podName TIMESERIES limit 50 WHERE clusterName IN ('akseu2c001aviprd001') AND namespaceName IN ('eu2-avi-prd-01')"
              }
            ],
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Container Memory Usage - % Used vs Limit",
          "layout": {
            "column": 5,
            "row": 5,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "FROM K8sContainerSample SELECT latest(memoryUsedBytes/memoryLimitBytes) * 100 as '% Memory' FACET clusterName, containerName, podName  UNTIL 1 minute ago TIMESERIES limit 50 WHERE clusterName IN ('akseu2c001aviprd001') AND namespaceName IN ('eu2-avi-prd-01')"
              }
            ],
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Container Restarts",
          "layout": {
            "column": 9,
            "row": 5,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.area"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "FROM K8sContainerSample SELECT max(restartCount)-min(restartCount) as 'Restarts' FACET clusterName, podName, containerName TIMESERIES WHERE clusterName like 'akseu2c001aviprd001' AND namespaceName IN ('eu2-avi-prd-01')"
              }
            ]
          }
        },
        {
          "title": "Pods by namespace",
          "layout": {
            "column": 1,
            "row": 8,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.bar"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "FROM K8sPodSample SELECT uniqueCount(entityId) as 'pod' FACET namespace since 5 minutes ago WHERE clusterName like 'akseu2c001aviprd001' AND namespaceName IN ('eu2-avi-prd-01')"
              }
            ]
          }
        },
        {
          "title": "Pods by Service",
          "layout": {
            "column": 5,
            "row": 8,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.bar"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "FROM K8sPodSample SELECT uniqueCount(podName) SINCE 5 minutes ago WHERE clusterName like 'akseu2c001aviprd001' AND namespaceName IN ('eu2-avi-prd-01') FACET label.app "
              }
            ]
          }
        },
        {
          "title": "Pods by service and status",
          "layout": {
            "column": 9,
            "row": 8,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.bar"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "FROM K8sPodSample SELECT uniqueCount(podName) SINCE 5 minutes ago WHERE clusterName like 'akseu2c001aviprd001' AND namespaceName IN ('eu2-avi-prd-01') FACET status, label.app "
              }
            ]
          }
        },
        {
          "title": "Pod Network Status",
          "layout": {
            "column": 1,
            "row": 11,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.table"
          },
          "rawConfiguration": {
            "dataFormatters": [],
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "SELECT latest(`net.rxBytesPerSecond`)/1000 as 'Received KBps', latest(`net.txBytesPerSecond`)/1000 as 'Transmitted KBps', latest(`net.errorsPerSecond`) as 'Errors / sec' FROM K8sPodSample FACET podName since 10 minutes ago UNTIL 1 minute ago limit 100 WHERE clusterName IN ('akseu2c001aviprd001') and namespace IN ('eu2-avi-prd-01')"
              }
            ]
          }
        },
        {
          "title": "Node Resources",
          "layout": {
            "column": 7,
            "row": 11,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.table"
          },
          "rawConfiguration": {
            "dataFormatters": [],
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "FROM K8sNodeSample, K8sPodSample SELECT latest(cpuUsedCores) as 'Used Cores', latest(memoryWorkingSetBytes) / 1000000 as 'Used Memory MB', uniqueCount(podName) as 'Pods' FACET nodeName since 10 minutes ago UNTIL 1 minute ago limit 100 WHERE clusterName IN ('akseu2c001aviprd001')"
              }
            ]
          }
        },
        {
          "title": "CPU Metrics by node",
          "layout": {
            "column": 1,
            "row": 14,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.table"
          },
          "rawConfiguration": {
            "dataFormatters": [
              {
                "name": "CPU Capacity (cores)",
                "precision": 2,
                "type": "decimal"
              },
              {
                "name": "CPU Used (cores)",
                "precision": 2,
                "type": "decimal"
              },
              {
                "name": "CPU Usage (%)",
                "precision": 2,
                "type": "decimal"
              }
            ],
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "FROM K8sNodeSample SELECT average(allocatableCpuCoresUtilization) AS 'CPU Usage (%)', average(cpuUsedCores) AS 'CPU Used (cores)', average(capacityCpuCores) AS 'CPU Capacity (cores)' WHERE clusterName IN ('akseu2c001aviprd001') FACET nodeName"
              }
            ]
          }
        },
        {
          "title": "% CPU usage by node",
          "layout": {
            "column": 7,
            "row": 14,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "FROM K8sNodeSample SELECT average(allocatableCpuCoresUtilization) AS 'Storage Usage (%)' WHERE clusterName IN ('akseu2c001aviprd001') FACET nodeName TIMESERIES AUTO LIMIT MAX"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Memory Metrics by node",
          "layout": {
            "column": 1,
            "row": 17,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.table"
          },
          "rawConfiguration": {
            "dataFormatters": [
              {
                "name": "Memory Capacity (GB)",
                "precision": 2,
                "type": "decimal"
              },
              {
                "name": "Memory Used (GB)",
                "precision": 2,
                "type": "decimal"
              },
              {
                "name": "Memory Usage (%)",
                "precision": 2,
                "type": "decimal"
              }
            ],
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "FROM K8sNodeSample SELECT average(allocatableMemoryUtilization) AS 'Memory Usage (%)', average(memoryUsedBytes) / 1e9 AS 'Memory Used (GB)', average(capacityMemoryBytes) / 1e9 AS 'Memory Capacity (GB)' WHERE clusterName IN ('akseu2c001aviprd001') FACET nodeName"
              }
            ]
          }
        },
        {
          "title": "% Memory usage by node",
          "layout": {
            "column": 7,
            "row": 17,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "FROM K8sNodeSample SELECT average(allocatableMemoryUtilization) AS 'Memory Usage (%)' WHERE clusterName IN ('akseu2c001aviprd001') FACET nodeName TIMESERIES AUTO LIMIT MAX"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Storage Metrics by node",
          "layout": {
            "column": 1,
            "row": 20,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.table"
          },
          "rawConfiguration": {
            "dataFormatters": [
              {
                "name": "Storage Capacity (GB)",
                "precision": 2,
                "type": "decimal"
              },
              {
                "name": "Storage Used (GB)",
                "precision": 2,
                "type": "decimal"
              },
              {
                "name": "Storage Usage (%)",
                "precision": 2,
                "type": "decimal"
              }
            ],
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "FROM K8sNodeSample SELECT average(1 - fsAvailableBytes/fsCapacityBytes) * 100 AS 'Storage Usage (%)', average(fsCapacityBytes - fsAvailableBytes) / 1e9 AS 'Storage Used (GB)', average(fsCapacityBytes) / 1e9 AS 'Storage Capacity (GB)' WHERE clusterName IN ('akseu2c001aviprd001') FACET nodeName"
              }
            ]
          }
        },
        {
          "title": "% Storage usage by node",
          "layout": {
            "column": 7,
            "row": 20,
            "width": 6,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 3279646,
                "query": "FROM K8sNodeSample SELECT average(1 - fsAvailableBytes/fsCapacityBytes) * 100 AS 'Storage Usage (%)' WHERE clusterName IN ('akseu2c001aviprd001') FACET nodeName TIMESERIES AUTO LIMIT MAX"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        }
      ]
    }
  ]
}
